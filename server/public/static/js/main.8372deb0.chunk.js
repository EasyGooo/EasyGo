(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{169:function(e,t,a){e.exports=a(408)},174:function(e,t,a){},176:function(e,t,a){},178:function(e,t,a){},204:function(e,t,a){},408:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(70),s=a.n(o),i=(a(174),a(7)),c=a(2),l=a(3),u=a(5),d=a(4),m=a(6),p=(a(176),a(178),a(409)),h=a(413),g=a(412),f=a(15),v=a(26),b=a.n(v),y=function e(){var t=this;Object(c.a)(this,e),this.signup=function(e){var a=new FormData;return Object.keys(e).forEach(function(t){return a.append(t,e[t])}),t.service.post("/signup",a,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){return e.data})},this.login=function(e){return t.service.post("/login",e).then(function(e){return e.data})},this.change=function(e){return t.service.post("/settings",e).then(function(e){return e.data})},this.loggedin=function(){return t.service.get("/loggedin").then(function(e){return e.data})},this.logout=function(){return t.service.get("/logout").then(function(e){return e.data})},this.service=b.a.create({baseURL:"".concat("https://easygoo.herokuapp.com/api","/auth"),withCredentials:!0})},E=a(410),j=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).handleFormSubmit=function(t){t.preventDefault();var a=e.state,n=a.username,r=a.password,o=a.photo;e.authService.signup({username:n,password:r,photo:o}).then(function(t){e.props.getUser(t),e.setState({username:"",password:"",photo:"",redirect:!0})})},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;"photo"===n?e.setState(Object(i.a)({},e.state,{photo:t.target.files[0]})):e.setState(Object(i.a)({},e.state,Object(f.a)({},n,r)))},e.state={username:"",password:"",photo:"",redirect:!1},e.authService=new y,e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return this.state&&this.state.redirect?r.a.createElement(E.a,{to:"/login"}):r.a.createElement("div",null,r.a.createElement("h2",null,"Signup"),r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("input",{type:"text",name:"username",onChange:function(t){return e.handleChange(t)}}),r.a.createElement("input",{type:"password",name:"password",onChange:function(t){return e.handleChange(t)}}),r.a.createElement("input",{type:"file",name:"photo",onChange:function(t){return e.handleChange(t)}}),r.a.createElement("input",{type:"submit",value:"signup"})))}}]),t}(n.Component),S=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).handleFormSubmit=function(t){t.preventDefault();var a=e.state,n=a.username,r=a.password;e.authService.login({username:n,password:r}).then(function(t){return e.props.getUser(t)}),e.setState({redirect:!0})},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(f.a)({},n,r))},e.state={username:"",password:"",redirect:!1},e.authService=new y,e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return 1==this.state.redirect?r.a.createElement(E.a,{to:"/profile"}):r.a.createElement("div",null,r.a.createElement("div",{className:"loginSignupBody"},r.a.createElement("div",{className:"back-btn"},r.a.createElement(p.a,{to:"/",className:"button-circle"},r.a.createElement("i",{className:"button-circle__icon fa fa-arrow-right","data-feather":"chevron-right"}))),r.a.createElement("img",{className:"logo",src:"../../../../images/EasyGo-white.svg",alt:""}),r.a.createElement("form",{className:"center-form",onSubmit:this.handleFormSubmit},r.a.createElement("input",{className:"inputs-form",placeholder:"username",type:"text",name:"username",onChange:function(t){return e.handleChange(t)}}),r.a.createElement("input",{className:"inputs-form",placeholder:"password",type:"password",name:"password",onChange:function(t){return e.handleChange(t)}}),r.a.createElement("input",{className:"button submit-log",type:"submit",value:"Login"}))))}}]),t}(n.Component),C=(a(204),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"nav-block"},r.a.createElement("nav",{className:"menu"},r.a.createElement("input",{type:"checkbox",href:"#",className:"menu-open",name:"menu-open",id:"menu-open"}),r.a.createElement("label",{className:"menu-open-button",for:"menu-open"},r.a.createElement("span",{className:"hamburger hamburger-1"}),r.a.createElement("span",{className:"hamburger hamburger-2"}),r.a.createElement("span",{className:"hamburger hamburger-3"})),r.a.createElement(p.a,{to:"/notifications",className:"menu-item"}," ",r.a.createElement("i",{className:"fa fa-bell"})," "),r.a.createElement(p.a,{to:"/profile",className:"menu-item"}," ",r.a.createElement("i",{className:"fa fa-user"})," "),r.a.createElement(p.a,{to:"/create",className:"menu-item"}," ",r.a.createElement("i",{className:"fa fa-plus"})," "),r.a.createElement(p.a,{to:"/join",className:"menu-item"}," ",r.a.createElement("i",{className:"fa fa-search"})," ")),r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1"},r.a.createElement("defs",null,r.a.createElement("filter",{id:"shadowed-goo"},r.a.createElement("feGaussianBlur",{in:"SourceGraphic",result:"blur",stdDeviation:"10"}),r.a.createElement("feColorMatrix",{in:"blur",mode:"matrix",values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 18 -7",result:"goo"}),r.a.createElement("feGaussianBlur",{in:"goo",stdDeviation:"3",result:"shadow"}),r.a.createElement("feColorMatrix",{in:"shadow",mode:"matrix",values:"0 0 0 0 0  0 0 0 0 0  0 0 0 0 0  0 0 0 1 -0.2",result:"shadow"}),r.a.createElement("feOffset",{in:"shadow",dx:"1",dy:"1",result:"shadow"}),r.a.createElement("feComposite",{in2:"shadow",in:"goo",result:"goo"}),r.a.createElement("feComposite",{in2:"goo",in:"SourceGraphic",result:"mix"})),r.a.createElement("filter",{id:"goo"},r.a.createElement("feGaussianBlur",{in:"SourceGraphic",result:"blur",stdDeviation:"10"}),r.a.createElement("feColorMatrix",{in:"blur",mode:"matrix",values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 18 -7",result:"goo"}),r.a.createElement("feComposite",{in2:"goo",in:"SourceGraphic",result:"mix"})))))}}]),t}(n.Component)),O=(n.Component,function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).handleFormSubmit=function(t){t.preventDefault();var a=e.state,n=a.username,r=a.password,o=a.email;e.authService.change({username:n,password:r,email:o}).then(function(t){return e.props.getUser(t)})},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(f.a)({},n,r))},e.state={username:"",password:"",email:""},e.authService=new y,e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(C,null),r.a.createElement("header",{id:"profile-header"}),r.a.createElement("img",{src:this.props.image,alt:""}),r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("label",null,"Username"),r.a.createElement("input",{type:"text",name:"username",onChange:function(t){return e.handleChange(t)}}),r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",name:"password",onChange:function(t){return e.handleChange(t)}}),r.a.createElement("label",null,"Email"),r.a.createElement("input",{type:"text",name:"email",onChange:function(t){return e.handleChange(t)}}),r.a.createElement("input",{type:"submit",value:"Change"})))}}]),t}(n.Component)),w=a(19),N=a.n(w),k=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleChange=function(e){a.setState({address:e},function(){console.log(a.state)})},a.handleSelect=function(e){Object(w.geocodeByAddress)(e).then(function(e){return Object(w.getLatLng)(e[0])}).then(function(e){a.props.update(e),console.log("Success",e)}).catch(function(e){return console.error("Error",e)})},a.state={address:""},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(N.a,{value:this.state.address,onChange:this.handleChange,onSelect:this.handleSelect},function(e){var t=e.getInputProps,a=e.suggestions,n=e.getSuggestionItemProps,o=e.loading;return r.a.createElement("div",null,r.a.createElement("input",t({placeholder:"Start point",className:"location-search-inputStart"})),r.a.createElement("div",{className:"autocomplete-dropdown-container "},o&&r.a.createElement("div",null,"Loading..."),a.map(function(e){e.active;var t=e.active?{backgroundColor:"#fafafa",cursor:"pointer"}:{backgroundColor:"#ffffff",cursor:"pointer"};return r.a.createElement("div",n(e,{className:"auto-input",style:t}),r.a.createElement("span",null,e.description))})))})}}]),t}(r.a.Component),_=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleChange=function(e){a.setState({address:e},function(){console.log(a.state)})},a.handleSelect=function(e){Object(w.geocodeByAddress)(e).then(function(e){return Object(w.getLatLng)(e[0])}).then(function(e){a.props.update(e),console.log("Success",e)}).catch(function(e){return console.error("Error",e)})},a.state={address:""},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(N.a,{value:this.state.address,onChange:this.handleChange,onSelect:this.handleSelect,className:"auto-info"},function(e){var t=e.getInputProps,a=e.suggestions,n=e.getSuggestionItemProps,o=e.loading;return r.a.createElement("div",null,r.a.createElement("input",t({placeholder:"End Point",className:"location-search-inputEnd"})),r.a.createElement("div",{className:"autocomplete-dropdown-container"},o&&r.a.createElement("div",null,"Loading..."),a.map(function(e){e.active;var t=e.active?{backgroundColor:"#fafafa",cursor:"pointer"}:{backgroundColor:"#ffffff",cursor:"pointer"};return r.a.createElement("div",n(e,{className:"auto-input",style:t}),r.a.createElement("span",null,e.description))})))})}}]),t}(r.a.Component),D=function e(){var t=this;Object(c.a)(this,e),this.companies=function(){return t.service.get("/companies").then(function(e){return e.data})},this.userJourneysAccess=function(){return t.service.get("/journeys").then(function(e){return e.data})},this.userJourneysCreate=function(e){return t.service.post("/create",e).then(function(e){return e.data})},this.userCars=function(){return t.service.post("/journeys/car").then(function(e){return e.data})},this.service=b.a.create({baseURL:"".concat("https://easygoo.herokuapp.com/api","/journeys"),withCredentials:!0})},P=a(168),M=a(103),F=a.n(M),x=a(163),A=a.n(x),L=a(164),U=a.n(L),I=a(33),$=a.n(I),B=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={enabled:a.enabledFromProps()},a.isEnabled=function(){return a.state.enabled},a.toggleSwitch=function(e){e.persist(),e.preventDefault();var t=a.props,n=t.onClick,r=t.onStateChanged;a.setState({enabled:!a.state.enabled},function(){var t=a.state,o=Object.assign(e,{SWITCH_STATE:t});$()(n)&&n(o),$()(r)&&r(t)})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"enabledFromProps",value:function(){var e=this.props.enabled;return e=$()(e)?e():e,U()(e)&&e}},{key:"render",value:function(){var e=this.state.enabled,t=this.props,a=(t.enabled,t.theme),n=(t.onClick,t.className),o=(t.onStateChanged,Object(P.a)(t,["enabled","theme","onClick","className","onStateChanged"])),s=a&&A()(a)?a:"default",i=F()("switch switch--".concat(s),n),c=F()("switch-toggle","switch-toggle--".concat(e?"on":"off"));return r.a.createElement("div",Object.assign({className:i,onClick:this.toggleSwitch},o),r.a.createElement("div",{className:c}))}}]),t}(n.Component),G=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).getJourneys=function(){a.journeyService.userJourneysAccess().then(function(e){return a.setState({journeys:e})})},a.toggleNotifications=function(e){var t=e.enabled;a.setState({enabled:t})},a.startInfo=function(e){a.setState(Object(i.a)({},a.state,{userStart:e}))},a.endInfo=function(e){a.setState(Object(i.a)({},a.state,{userEnd:e}))},a.filterByDistance=function(){0===a.state.journeysFiltered.length&&a.state.journeys.forEach(function(e){e.coorstart.lat<a.state.userStart.lat+.01&&e.coorstart.lat>a.state.userStart.lat-.01&&e.coorstart.lng<a.state.userStart.lng+.01&&e.coorstart.lng>a.state.userStart.lng-.01&&e.coorend.lat<a.state.userEnd.lat+.01&&e.coorend.lat>a.state.userEnd.lat-.01&&e.coorend.lng<a.state.userEnd.lng+.01&&e.coorend.lng>a.state.userEnd.lng-.01&&a.state.journeysFiltered.push(e),console.log(a.state.journeysFiltered)})},a.sortByDate=function(){var e=a.state.journeysFiltered.sort(function(e,t){return e.date>t.date?1:t.date>e.date?-1:0});console.log(a.state.journeysFiltered),a.setState({journeysFiltered:e})},a.sortByTime=function(){var e=a.state.journeysFiltered.sort(function(e,t){return e.time>t.time?1:t.time>e.time?-1:0});console.log(a.state.journeysFiltered),a.setState({journeysFiltered:e})},a.sortByCompany=function(){var e=a.state.journeysFiltered.sort(function(e,t){return e.company>t.company?1:t.company>e.company?-1:0});console.log(a.state.journeysFiltered),a.setState({journeysFiltered:e})},a.sortByPlaces=function(){var e=a.state.journeysFiltered.sort(function(e,t){return e.places>t.places?1:t.places>e.places?-1:0});console.log(a.state.journeysFiltered),a.setState({journeysFiltered:e})},a.sortByDistance=function(){var e=a.state.journeysFiltered.sort(function(e,t){return e.distance>t.distance?1:t.distance>e.distance?-1:0});console.log(a.state.journeysFiltered),a.setState({journeysFiltered:e})},a.sortByDuration=function(){var e=a.state.journeysFiltered.sort(function(e,t){return e.duration>t.duration?1:t.duration>e.duration?-1:0});console.log(a.state.journeysFiltered),a.setState({journeysFiltered:e})},a.sortByPrice=function(){var e=a.state.journeysFiltered.sort(function(e,t){return e.price>t.price?1:t.price>e.price?-1:0});console.log(a.state.journeysFiltered),a.setState({journeysFiltered:e})},a.state={userStart:null,userEnd:null,directions:null,journeys:null,journeysFiltered:[],enabled:!1},a.journeyService=new D,a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getJourneys()}},{key:"render",value:function(){console.log(this.state.journeysFiltered);var e=null==this.state.userEnd?r.a.createElement("p",null):console.log(this.filterByDistance()),t=this.state.enabled;return r.a.createElement("div",{className:"cont"},e,r.a.createElement(C,null),r.a.createElement("div",{className:"join-block"},r.a.createElement("div",{className:"userJourney"},r.a.createElement(k,{update:this.startInfo}),r.a.createElement(_,{update:this.endInfo})),r.a.createElement("div",{className:"filters"},r.a.createElement("div",{className:"toggle"},r.a.createElement("p",null,"Filters:"),r.a.createElement(B,{theme:"default",enabled:t,onStateChanged:this.toggleNotifications})),t&&r.a.createElement("div",null,r.a.createElement("button",{onClick:this.sortByCompany},"company"),r.a.createElement("button",{onClick:this.sortByDate},"Date"),r.a.createElement("button",{onClick:this.sortByTime},"time"),r.a.createElement("button",{onClick:this.sortByDistance},"distance"),r.a.createElement("button",{onClick:this.sortByPrice},"price"),r.a.createElement("button",{onClick:this.sortByDuration},"duration"))),r.a.createElement("div",null,this.state.journeysFiltered.map(function(e){return r.a.createElement(p.a,{key:e._id,to:"/journeys/".concat(e._id)},r.a.createElement("div",null,r.a.createElement("div",{className:"journey-target"},r.a.createElement("img",{className:"user-join-img",src:e.imgPath,alt:""}),r.a.createElement("div",null,r.a.createElement("p",null,e.username),r.a.createElement("h1",null,e.company),r.a.createElement("p",null,e.date),r.a.createElement("p",null,e.distance),r.a.createElement("p",null,e.duration),r.a.createElement("p",null,e.time),r.a.createElement("p",null,e.price)))))}))))}}]),t}(n.Component),R=(a(78),a(20)),J=function e(t){var a=this;Object(c.a)(this,e),this.create=function(e){return a.service.post("/create",e).then(function(e){return e.data})},this.status=function(e){return a.service.post("/status",e).then(function(e){return e.data})},this.sentNotifs=function(e){return a.service.get("/sentNotifications",e).then(function(e){return e.data})},this.placesChange=function(e){return a.service.post("/change",e).then(function(e){return e.data})},this.getNotifications=function(e){return a.service.get("/show",e).then(function(e){return e.data})},this.service=b.a.create({baseURL:"".concat("https://easygoo.herokuapp.com/api","/notifications"),withCredentials:!0})},T=(r.a.Component,a(72)),W=a(73),q=a(49),Y=q.compose,K=q.withProps,V=q.lifecycle;a(102).config();var z=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).updateCoorstart=function(e){a.setState(Object(i.a)({},a.state,{coorstart:e}),function(){a.map=a.createMap(a.comodin,a.state.map)()}),a.props.startPoint(e)},a.updateCoorend=function(e){a.setState(Object(i.a)({},a.state,{coorend:e}),function(){a.map=a.createMap(a.comodin,a.state.map)()}),a.props.endPoint(e),a.props.distance(a.state.distance)},a.updateCoorAsked=function(e){a.setState(Object(i.a)({},a.state,{coorAsked:e}))},a.handleInfo=function(){var e=a.state.coorstart;a.props.infoMaps(e)},a.componentWillMount=function(){a.setState(Object(i.a)({},a.state,{coorstart:a.props.startPoint,coorend:a.props.endPoint}))},a.createMap=function(e,t){var n=a.state.coorstart,o=a.state.coorend;a.state.coorAsked;return Y(K({googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyB-P5Wpth-cMCDmm_TFPev1gWaoqhYAYpQ&v=3.exp&libraries=geometry,drawing,places",loadingElement:r.a.createElement("div",{style:{height:"100%"}}),containerElement:r.a.createElement("div",{style:{height:"400px",width:"600px"}}),mapElement:r.a.createElement("div",{className:"map",style:{height:"100%"}})}),R.withScriptjs,R.withGoogleMap,V({componentDidMount:function(){var e=this,t=window.google;o&&n&&(new t.maps.DirectionsService).route({origin:new t.maps.LatLng(n.lat,n.lng),destination:new t.maps.LatLng(o.lat,o.lng),travelMode:t.maps.TravelMode.DRIVING},function(a,n){n===t.maps.DirectionsStatus.OK?e.setState({directions:a,distance:(a.routes[0].legs[0].distance.value/1e3).toFixed(2).toString().replace(".",",")+" Km",duration:Math.floor(a.routes[0].legs[0].duration.value/3600*60)+" min",price:(.06*parseFloat(a.routes[0].legs[0].distance.value/1e3)*1.3*2).toFixed(2)+" \u20ac",start_point:a.routes[0].legs[0].start_address,start_location_lat:a.routes[0].legs[0].start_location.lat(),start_location_lng:a.routes[0].legs[0].start_location.lng(),end_point:a.routes[0].legs[0].end_address,end_location_lat:a.routes[0].legs[0].end_location.lat(),end_location_lng:a.routes[0].legs[0].end_location.lng()},function(){var e=a.routes[0].overview_path[0].lat(),t=a.routes[0].overview_path[0].lng();console.log(e,t)}):console.error("error fetching directions ".concat(a))})}}))(function(e){return r.a.createElement(R.GoogleMap,{defaultZoom:13,defaultCenter:new window.google.maps.LatLng(40.416947,-3.703523)},e.directions&&r.a.createElement(R.DirectionsRenderer,{directions:e.directions}))})},a.handleFormSubmit=function(e){e.preventDefault();var t=a.state,n=t.company,r=t.places,o=t.date,s=t.time,i=t.price,c=t.description,l=t.distance,u=t.duration,d=t.coorstart,m=t.coorend;a.journeyService.userJourneysCreate({company:n,places:r,date:o,time:s,description:c,price:i,distance:l,duration:u,coorstart:d,coorend:m}),a.setState({redirect:!0})},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(i.a)({},a.state,Object(f.a)({},n,r)))},a.state={coorstart:null,coorend:null,coorAsked:null,position:{lat:40.416947,lng:-3.703523},companies:T,startpoints:W,places:3,map:!1,redirect:!1},a.MapWithADirectionsRenderer=null,a.map=null,a.journeyService=new D,a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return this.map=this.createMap(this.comodin,this.state.map)(),console.log(this.state),this.state&&this.state.redirect?r.a.createElement(E.a,{to:"/home"}):r.a.createElement("div",null,this.map)}}]),t}(n.Component),Q=a(49),Z=Q.compose,H=Q.withProps,X=Q.lifecycle;a(102).config();var ee=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).updateCoorstart=function(e){a.setState(Object(i.a)({},a.state,{coorstart:e}),function(){a.map=a.createMap(a.comodin,a.state.map)()}),a.props.startPoint(e)},a.updateCoorend=function(e){a.setState(Object(i.a)({},a.state,{coorend:e}),function(){a.map=a.createMap(a.comodin,a.state.map)()}),a.props.endPoint(e),a.props.distance(a.state.distance)},a.updateCoorAsked=function(e){a.setState(Object(i.a)({},a.state,{coorAsked:e}),function(){a.map=a.createMap(a.comodin,a.state.map)()})},a.getJourney=function(e){return b.a.get("".concat("https://easygoo.herokuapp.com/api","/journeys/").concat(e)).then(function(e){return a.setState(Object(i.a)({},a.state,{journey:a.props.match.params.id?e.data:e.data[0]}))}).catch(function(e){return console.log(e)})},a.componentWillMount=function(){a.setState(Object(i.a)({},a.state,{coorstart:a.props.startPoint,coorend:a.props.endPoint,coorAsked:a.props.coorAsked}))},a.createMap=function(e,t){var n=a.state.coorstart,o=a.state.coorend,s=a.state.coorAsked;return Z(H({googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyB-P5Wpth-cMCDmm_TFPev1gWaoqhYAYpQ&v=3.exp&libraries=geometry,drawing,places",loadingElement:r.a.createElement("div",{style:{height:"100%"}}),containerElement:r.a.createElement("div",{style:{height:"400px",width:"600px"}}),mapElement:r.a.createElement("div",{className:"map",style:{height:"100%"}})}),R.withScriptjs,R.withGoogleMap,X({componentDidMount:function(){var e=this;this.props.match.params.id?this.getJourney("journeys/".concat(this.props.match.params.id)):console.log("loading...");var t=window.google;o&&n&&(new t.maps.DirectionsService).route({origin:new t.maps.LatLng(n.lat,n.lng),destination:new t.maps.LatLng(o.lat,o.lng),travelMode:t.maps.TravelMode.DRIVING,waypoints:[{location:new t.maps.LatLng(s.lat,s.lng)}]},function(a,n){n===t.maps.DirectionsStatus.OK?e.setState({directions:a,distance:(a.routes[0].legs[0].distance.value/1e3+a.routes[0].legs[1].distance.value/1e3).toFixed(2).toString().replace(".",",")+" Km",duration:Math.floor(60*(a.routes[0].legs[0].duration.value/3600+a.routes[0].legs[1].duration.value/3600))+" min",price:(.06*parseFloat(a.routes[0].legs[0].distance.value/1e3)*1.3*2).toFixed(2)+" \u20ac",start_point:a.routes[0].legs[0].start_address,start_location_lat:a.routes[0].legs[0].start_location.lat(),start_location_lng:a.routes[0].legs[0].start_location.lng(),end_point:a.routes[0].legs[0].end_address,end_location_lat:a.routes[0].legs[0].end_location.lat(),end_location_lng:a.routes[0].legs[0].end_location.lng()},function(){}):console.error("error fetching directions ".concat(a))})}}))(function(e){return r.a.createElement(R.GoogleMap,{defaultZoom:13,defaultCenter:new window.google.maps.LatLng(40.416947,-3.703523)},e.directions&&r.a.createElement(R.DirectionsRenderer,{directions:e.directions}))})},a.state={journey:{},places:null},a.notificationsService=new J,a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){console.log(this.state);var e=this.state.journey.journey?r.a.createElement("div",null,r.a.createElement(z,{startPoint:this.state.journey.journey.coorstart,endPoint:this.state.journey.journey.coorend})):r.a.createElement("p",null,"loading..");return console.log(this.state.journey),this.state.journey.journey&&console.log(this.state.journey.journey.company),r.a.createElement("div",null,e,r.a.createElement("button",{onClick:this.applyForPlace},"apply"))}}]),t}(n.Component),te=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).getJourney=function(e){return b.a.get("".concat("https://easygoo.herokuapp.com/api","/journeys/").concat(e)).then(function(e){return a.setState(Object(i.a)({},a.state,{journey:a.props.match.params.id?e.data:e.data[0]}))}).catch(function(e){return console.log(e)})},a.applyForPlace=function(){if(!(a.state.journey.journey.places>0))return-1;var e=a.state.journey.journey.authorId,t=a.state.journey.journey._id,n=a.state.journey.journey.company;a.notificationsService.create({receptorId:e,type:"reqPlace",company:n,journeyId:t})},a.state={journey:{},places:null},a.notificationsService=new J,a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.id?this.getJourney("journeys/".concat(this.props.match.params.id)):console.log("loading...")}},{key:"render",value:function(){console.log(this.state);var e=this.state.journey.journey?r.a.createElement("div",null,r.a.createElement("p",null,this.state.journey.journey.company),r.a.createElement("p",null,this.state.journey.journey.date),r.a.createElement("p",null,this.state.journey.journey.time),r.a.createElement("p",null,this.state.journey.journey.price),r.a.createElement("p",null,this.state.journey.journey.duration),r.a.createElement(z,{startPoint:this.state.journey.journey.coorstart,endPoint:this.state.journey.journey.coorend})):r.a.createElement("p",null,"loading..");return console.log(this.state.journey),this.state.journey.journey&&console.log(this.state.journey.journey.company),r.a.createElement("div",null,e,r.a.createElement("button",{onClick:this.applyForPlace},"apply"))}}]),t}(n.Component),ae=a(49),ne=ae.compose,re=ae.withProps,oe=ae.lifecycle;a(102).config();var se=function(e){function t(e){var a,n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).fetchUser=function(){n.authService.loggedin().then(function(e){return n.setState(Object(i.a)({},n.state,{user:e}))})},n.updateCoorstart=function(e){n.setState(Object(i.a)({},n.state,{coorstart:e}),function(){n.map=n.createMap(n.comodin,n.state.map)()}),n.props.startPoint(e)},n.updateCoorend=function(e){n.setState(Object(i.a)({},n.state,{coorend:e}),function(){n.map=n.createMap(n.comodin,n.state.map)()}),n.props.endPoint(e),n.props.distance(n.state.distance)},n.updateCoorAsked=function(e){n.setState(Object(i.a)({},n.state,{coorAsked:e}))},n.handleInfo=function(){var e=n.state.coorstart;n.props.infoMaps(e)},n.comodin=function(e,t,a){n.distance===e&&n.duration===t||n.setState(Object(i.a)({},n.state,{distance:e,duration:t,price:a,map:!0}))},n.createMap=function(e,t){var a=n.state.coorstart,o=n.state.coorend;n.state.coorAsked;return ne(re({googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyB-P5Wpth-cMCDmm_TFPev1gWaoqhYAYpQ&v=3.exp&libraries=geometry,drawing,places",loadingElement:r.a.createElement("div",{style:{height:"100%"}}),containerElement:r.a.createElement("div",{style:{height:"80vh",width:"50vw"}}),mapElement:r.a.createElement("div",{className:"map",style:{height:"100%"}})}),R.withScriptjs,R.withGoogleMap,oe({componentDidMount:function(){var t=this,n=window.google;o&&a&&(new n.maps.DirectionsService).route({origin:new n.maps.LatLng(a.lat,a.lng),destination:new n.maps.LatLng(o.lat,o.lng),travelMode:n.maps.TravelMode.DRIVING},function(a,r){r===n.maps.DirectionsStatus.OK?t.setState({directions:a,distance:(a.routes[0].legs[0].distance.value/1e3).toFixed(2).toString().replace(".",","),duration:Math.floor(a.routes[0].legs[0].duration.value/3600*60),price:(.06*parseFloat(a.routes[0].legs[0].distance.value/1e3)*1.3*2).toFixed(2),start_point:a.routes[0].legs[0].start_address,start_location_lat:a.routes[0].legs[0].start_location.lat(),start_location_lng:a.routes[0].legs[0].start_location.lng(),end_point:a.routes[0].legs[0].end_address,end_location_lat:a.routes[0].legs[0].end_location.lat(),end_location_lng:a.routes[0].legs[0].end_location.lng()},function(){console.log(t.price),console.log(t.state);var n=a.routes[0].overview_path[0].lat(),r=a.routes[0].overview_path[0].lng();e(t.state.distance,t.state.duration,t.state.price),console.log(n,r)}):console.error("error fetching directions ".concat(a))})}}))(function(e){return r.a.createElement(R.GoogleMap,{defaultZoom:10,defaultCenter:new window.google.maps.LatLng(40.416947,-3.703523)},e.directions&&r.a.createElement(R.DirectionsRenderer,{directions:e.directions}))})},n.handleFormSubmit=function(e){e.preventDefault();var t=n.state,a=t.company,r=t.places,o=t.date,s=t.time,i=t.price,c=t.description,l=t.distance,u=t.duration,d=t.coorstart,m=t.coorend,p=n.state.user.imgPath,h=n.state.user.username;n.journeyService.userJourneysCreate({company:a,places:r,date:o,time:s,description:c,price:i,distance:l,duration:u,coorstart:d,coorend:m,username:h,imgPath:p}),n.setState({redirect:!0})},n.handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(i.a)({},n.state,Object(f.a)({},a,r)))},n.state=(a={coorstart:null,coorend:null,cooAsked:null,position:{lat:40.416947,lng:-3.703523},companies:T,startpoints:W,places:3,map:!1},Object(f.a)(a,"places",3),Object(f.a)(a,"redirect",!1),Object(f.a)(a,"user",null),a),n.MapWithADirectionsRenderer=null,n.map=null,n.journeyService=new D,n.authService=new y,n.fetchUser(),n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){this.map=this.createMap(this.comodin,this.state.map)()}},{key:"render",value:function(){var e=this;return console.log(this.state.user),this.state&&this.state.redirect?r.a.createElement(E.a,{to:"/profile"}):r.a.createElement("div",{className:"createSection"},this.map,r.a.createElement("div",{className:"formulary"},r.a.createElement("div",{className:"journeyInfo-block"},r.a.createElement("div",{className:"info-text"},r.a.createElement("div",{className:"journeyInfo"},r.a.createElement("p",null,this.state.duration)),r.a.createElement("p",null,"mins")),r.a.createElement("div",{className:"info-text"},r.a.createElement("div",{className:"journeyInfo"},r.a.createElement("p",null,this.state.price)),r.a.createElement("p",null,"eur"))),r.a.createElement("div",{className:"autoComplete"},r.a.createElement(k,{update:this.updateCoorstart}),r.a.createElement(_,{update:this.updateCoorend})),r.a.createElement("form",{className:"inputs",onSubmit:this.handleFormSubmit},r.a.createElement("input",{type:"text",name:"company",placeholder:"Company name",onChange:function(t){return e.handleChange(t)},className:"inputCompany"}),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("input",{type:"date",name:"date",onChange:function(t){return e.handleChange(t)},className:"inputDate"}),r.a.createElement("input",{type:"time",name:"time",onChange:function(t){return e.handleChange(t)},className:"inputTime"})),r.a.createElement("textarea",{type:"text",name:"description",placeholder:"Requirements to travel with you ...",onChange:function(t){return e.handleChange(t)},className:"inputDescription"}),r.a.createElement("button",{type:"submit",value:"submit",className:"btn"},"submit",r.a.createElement("div",{className:"ico"},r.a.createElement("i",{className:"fa fa-paper-plane"}))))))}}]),t}(n.Component),ie=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=a.state,n=t.company,r=t.places,o=t.date,s=t.time,i=t.description,c=t.distance,l=t.duration,u=t.startPoint,d=t.endPoint;a.journeyService.userJourneysCreate({company:n,places:r,date:o,time:s,description:i,distance:c,duration:l,startPoint:u,endPoint:d})},a.startPoint=function(e){a.setState({startPoint:e},function(){return console.log("Updated Creation State:",a.state)})},a.endPoint=function(e){a.setState({endPoint:e},function(){return console.log("Updated Creation State:",a.state)})},a.distance=function(e){a.setState({distance:e},function(){return console.log("Updated Creation State:",a.state)})},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(i.a)({},a.state,Object(f.a)({},n,r)))},a.state={},a.journeyService=new D,a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(C,null),r.a.createElement(se,{startPoint:this.startPoint,endPoint:this.endPoint,user:this.props.username,distance:this.distance}))}}]),t}(n.Component),ce=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"loginSignupBody"},r.a.createElement("img",{className:"logo",src:"../../../../images/EasyGo-white.svg",alt:""}),r.a.createElement("h1",{className:"easy-go"},"easy go"),r.a.createElement(p.a,{className:"button btn-log",to:"/login"},"Log in"),r.a.createElement(p.a,{className:"button btn-sign",to:"/signup"},"Sign up")))}}]),t}(n.Component),le=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).getNotifications=function(){a.notificationsService.getNotifications().then(function(e){return a.setState({notifications:e})})},a.paintNotifications=function(){var e=[];a.state.notifications?a.state.notifications.forEach(function(t){e.push(t),a.setState({newNotifications:e})}):console.log("not found")},a.acceptPassenger=function(e,t,n,r){var o=e,s=r,i=n;a.notificationsService.status({status:"Accepted",idNotification:o,journeyId:t,authorId:s,receptorId:i}).then(console.log)},a.state={notifications:[],newNotifications:[]},a.notificationsService=new J,a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getNotifications(),this.paintNotifications()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,Array.isArray(this.state.notifications)&&this.state.notifications.map(function(t,a){return r.a.createElement("div",{className:"notifs-block"},r.a.createElement(C,null),"reqPlace"==t.type&&"Pending"==t.status?r.a.createElement("div",{className:"Message"},r.a.createElement("div",{className:"Message-icon"},r.a.createElement("i",{className:"fa fa-bell-o"})),r.a.createElement("div",{className:"Message-body"},r.a.createElement("p",null,t.company),r.a.createElement("button",{className:"Message-button",key:t._id,onClick:function(a){return e.acceptPassenger(t._id,t.journeyId,t.authorId,t.receptorId)}},"Accept"),r.a.createElement("button",{className:"Message-button"},"Deny")),r.a.createElement("button",{className:"Message-close js-messageClose"},r.a.createElement("i",{class:"fa fa-times"}))):r.a.createElement("div",null),"resPlace"==t.type?r.a.createElement("div",null,r.a.createElement("button",null,"pay")):r.a.createElement("div",null))}))}}]),t}(n.Component),ue=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).fetchUser=function(){e.authService.loggedin().then(function(t){return e.setState(Object(i.a)({},e.state,{user:t}))})},e.getUser=function(t){e.setState(Object(i.a)({},e.state,{user:t}))},e.logout=function(){e.authService.logout().then(function(){return e.setState(Object(i.a)({},e.state,{user:null}))})},e.state={user:null},e.authService=new y,e.fetchUser(),e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state.user?r.a.createElement("div",null,r.a.createElement(p.a,{to:"/login",className:"logout",onClick:this.logout},"Logout")):r.a.createElement("div",null);return r.a.createElement("div",{className:"App"},t,r.a.createElement(h.a,null,r.a.createElement(g.a,{exact:!0,path:"/singup",render:function(){return r.a.createElement(j,{getUser:e.getUser})}}),r.a.createElement(g.a,{exact:!0,path:"/login",render:function(){return r.a.createElement(S,{getUser:e.getUser})}}),r.a.createElement(g.a,{exact:!0,path:"/",render:function(){return r.a.createElement(ce,{getUser:e.getUser})}}),r.a.createElement(g.a,{path:"/join",render:function(){return r.a.createElement(G,{getUser:e.getUser})}}),r.a.createElement(g.a,{path:"/create",render:function(){return r.a.createElement(ie,{getUser:e.getUser})}}),r.a.createElement(g.a,{path:"/signup",render:function(){return r.a.createElement(j,{getUser:e.getUser})}}),r.a.createElement(g.a,{path:"/profile",render:function(){return r.a.createElement(O,{image:e.state.user.imgPath,getUser:e.getUser})}}),r.a.createElement(g.a,{exact:!0,path:"/journeys/:id",component:te}),r.a.createElement(g.a,{exact:!0,path:"/journeys/:id/askstop",component:ee}),r.a.createElement(g.a,{exact:!0,path:"/notifications",render:function(){return r.a.createElement(le,{getUser:e.getUser})}}),r.a.createElement(g.a,{path:"/askstop",render:function(){return r.a.createElement(ee,{getUser:e.getUser})}})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var de=a(411);s.a.render(r.a.createElement(de.a,null,r.a.createElement(ue,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},72:function(e){e.exports=[{_id:{$oid:"5c1282fe1dad4c757895c3d5"},name:"Daikin AC Spain S.A",address:"C/ V\xeda de los Poblados, 1",position:{lat:{$numberDouble:"40.47606"},lng:{$numberDouble:"-3.636175"}}},{_id:{$oid:"5c1282fe1dad4c757895c3d6"},name:"Aegon Seguros",address:"C/ V\xeda de los Poblados, 3",position:{lat:{$numberDouble:"40.476928"},lng:{$numberDouble:"-3.63342"}}},{_id:{$oid:"5c1282fe1dad4c757895c3d7"},name:"Iberdrola S.A.",address:"C/ Tom\xe1s Redondo, 1",position:{lat:{$numberDouble:"40.47307"},lng:{$numberDouble:"-3.630874"}}},{_id:{$oid:"5c1282fe1dad4c757895c3d8"},name:"Plenilunio",address:"C/ Aracne,s/n",position:{lat:{$numberDouble:"40.446991"},lng:{$numberDouble:"-3.587365"}}},{_id:{$oid:"5c1282fe1dad4c757895c3d9"},name:"Altran Espa\xf1a",address:"C/ Campezo,1",position:{lat:{$numberDouble:"40.448591"},lng:{$numberDouble:"-3.581882"}}},{_id:{$oid:"5c1282fe1dad4c757895c3da"},name:"Madrid Marriott Auditorium",address:"Avenida de Arag\xf3n 400",position:{lat:{$numberDouble:"40.448315"},lng:{$numberDouble:"-3.558665"}}}]},73:function(e){e.exports=[{_id:{$oid:"5c1282fe1dad4c757895c3db"},address:"C/ Lomb\xeda, 1",position:{lat:{$numberDouble:"40.42602"},lng:{$numberDouble:"-3.672502"}}},{_id:{$oid:"5c1282fe1dad4c757895c3dc"},address:"C/ Alcal\xe1, 150",position:{lat:{$numberDouble:"40.427685"},lng:{$numberDouble:"-3.669478"}}},{_id:{$oid:"5c1282fe1dad4c757895c3dd"},address:"C/ Conde de Pe\xf1alver, 15",position:{lat:{$numberDouble:"40.426371"},lng:{$numberDouble:"-3.675635"}}}]},78:function(e,t,a){}},[[169,2,1]]]);
//# sourceMappingURL=main.8372deb0.chunk.js.map